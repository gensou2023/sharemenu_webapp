# マネタイズ設計 — フリーミアムプラン

作成日: 2026-02-16
最終更新: 2026-02-16

---

## 1. 方針

### コンセプト

「**機能制限なし・枚数で課金**」のシンプルなフリーミアム。

飲食店オーナー（BtoB）が気軽に試せることを最優先とし、Free で全機能を体験 → 「もっと作りたい」で自然に Pro へアップグレードする設計。

### 設計原則

1. **Free でも全機能を開放する** — アスペクト比制限やセッション制限は撤廃
2. **課金トリガーは「画像枚数」に一本化** — シンプルで説明しやすい
3. **セッション制限は撤廃** — セッション自体のコストはほぼゼロ（DB行のみ）
4. **飲食店の経費として妥当な価格** — ¥700/月はデザイナー外注の1/10以下

---

## 2. プラン構成

### 新プラン

| | Free | Pro (¥700/月) |
|---|---|---|
| 画像生成 | **10枚/月** | **50枚/月** |
| チャット | 無制限 | 無制限 |
| セッション | **無制限** | 無制限 |
| アスペクト比 | **全種（1:1, 9:16, 16:9）** | 全種 |
| ダウンロード | 制限なし | 制限なし |
| 画像保存期間 | **30日** | **無期限** |
| ギャラリー公開 | OK | OK |
| チャットヒアリング | 全機能 | 全機能 |
| キャッチコピー・ハッシュタグ提案 | 全機能 | 全機能 |

### 旧プラン（参考: 廃止）

| | Free（旧） | Pro（旧） |
|---|---|---|
| セッション/月 | 3 | 無制限 |
| 画像生成/日 | 5 | 50 |
| アスペクト比 | 1:1 のみ | 全種 |

### 変更点まとめ

| 項目 | 旧 | 新 | 理由 |
|------|-----|-----|------|
| セッション制限 | Free 3/月 | **撤廃** | セッションのコストはゼロ、制限は体験を損なう |
| 画像制限単位 | 日単位 | **月単位** | 飲食店は月に数回まとめて使うパターン |
| Free 画像枚数 | 5枚/日 | **10枚/月** | 月10枚で十分体験できる、コスト管理しやすい |
| Pro 画像枚数 | 50枚/日 | **50枚/月** | 実使用は月10〜30枚、50枚で十分 |
| アスペクト比 | Free は 1:1 のみ | **全種開放** | 機能制限なしの方針 |
| 画像保存 | 制限なし | **Free は30日** | Storage コスト抑制 + アップグレード動機 |

---

## 3. コスト分析

### 画像生成エンジン: Nano Banana Pro

| 利用方法 | 単価/枚 | 円換算（$1=¥150） |
|---------|---------|-----------------|
| 公式API（2K） | $0.134 | ¥20.1 |
| 公式Batch API（2K） | $0.067 | ¥10.0 |
| サードパーティ中継 | $0.05 | ¥7.5 |
| Google Pro契約（$19.99/月, ~3,000枚） | $0.0067 | ¥1.0 |
| Google Ultra契約（$99.99/月, ~30,000枚） | $0.0033 | ¥0.5 |

### Pro ¥700/月の損益分岐点

| API利用方法 | 1枚コスト | 損益分岐枚数 | Pro 50枚/月の損益 |
|------------|----------|-------------|-------------------|
| 公式API | ¥20 | 35枚 | **-¥300 赤字** |
| Batch API | ¥10 | 70枚 | **+¥200 黒字** |
| サードパーティ | ¥7.5 | 93枚 | **+¥325 黒字** |
| Google Pro契約 | ¥1 | 700枚 | **+¥650 黒字** |

### 固定費

| 項目 | 月額 |
|------|------|
| Supabase Pro | ~¥3,750 ($25) |
| Vercel Pro | ~¥3,000 ($20) |
| ドメイン等 | ~¥100 |
| **合計** | **~¥6,850/月** |

---

## 4. フェーズ別収益シミュレーション

### フェーズ1: ローンチ〜Pro 25人（Batch API or サードパーティ）

| 項目 | 計算 |
|------|------|
| Free 30人 × 10枚 × ¥10 | ¥3,000（獲得コスト） |
| Pro 10人 × 50枚 × ¥10 | ¥5,000 |
| Pro 収入 10人 × ¥700 | ¥7,000 |
| 固定費 | ¥6,850 |
| **月間損益** | **-¥7,850** |

→ Pro **25人** で損益分岐。初期は赤字だが顧客獲得投資と捉える。

### フェーズ2: Pro 30人超（Google Pro契約 $19.99/月に切替）

| 項目 | 計算 |
|------|------|
| Free 100人 × 10枚 × ¥1 | ¥1,000 |
| Pro 30人 × 50枚 × ¥1 | ¥1,500 |
| Google Pro契約 | ¥3,000 |
| Pro 収入 30人 × ¥700 | ¥21,000 |
| 固定費 | ¥6,850 |
| **月間損益** | **+¥8,650** |

→ 1枚¥1で余裕の黒字。

### フェーズ3: Pro 100人超（Ultra契約で利益最大化）

| 項目 | 計算 |
|------|------|
| Free 300人 × 10枚 × ¥0.5 | ¥1,500 |
| Pro 100人 × 50枚 × ¥0.5 | ¥2,500 |
| Google Ultra契約 | ¥15,000 |
| Pro 収入 100人 × ¥700 | ¥70,000 |
| 固定費 | ¥6,850 |
| **月間損益** | **+¥44,150** |

---

## 5. 上限通知 UX 設計

### 設計方針

「**驚かせない**」ことを最優先とする。ユーザーが残数を常に把握できる状態にし、上限到達を想定内にする。生成ボタンを押した瞬間に初めて課金モーダルが出る体験は「騙された」感を生むため避ける。

### 段階的通知フロー

| タイミング | 残数 | 表示形式 | 内容 |
|-----------|------|---------|------|
| **常時** | 全段階 | ChatInput 付近に小さく表示 | 「残り 7/10 枚」 |
| **残り3枚** | 3 | トースト通知（1回だけ） | 「今月あと3枚です」 |
| **残り1枚** | 1 | 画面上部バナー | 「今月最後の1枚です。大切に使いましょう」 |
| **0枚** | 0 | アップグレードモーダル | 成果サムネ + ポジティブ文面（後述） |

### 常時残数表示

ChatInput コンポーネント付近（送信ボタン横やチャットエリアの上部）に、控えめなテキストで残り枚数を表示する。

```
[残り 7/10 枚]        ← Free ユーザー
[残り 42/50 枚 | Pro]  ← Pro ユーザー
```

- チャット自体は制限しない（残数 0 でもチャット可能）
- 制限がかかるのは「画像生成」ボタン押下時のみ

### 上限到達モーダルの文面

**NG（避けるべきパターン）:**
> 「上限に達しました。Pro にアップグレードしてください」
> → 制限された・ブロックされた感が強い

**OK（採用するパターン）:**
> 「今月の無料枠 10枚を使い切りました！」
> 「今月作成した画像:」[サムネイル一覧（最大4枚）]
> 「Pro なら月50枚まで生成可能。1枚あたり約¥14で作れます」
> [Pro で続ける →]  [来月まで待つ]

**ポイント:**
- 今月の成果を見せて「無料でこれだけ使えた」と満足感を先に与える
- 「制限された」ではなく「使い切った」のポジティブフレーミング
- 「来月まで待つ」を明示し、無料ユーザーへの敬意を示す
- Pro の価値を「1枚あたり¥14」で具体的に訴求

### ブロック対象

| 操作 | 残数 0 の場合 |
|------|-------------|
| チャット | **制限なし**（チャット自体はコストがほぼゼロ） |
| 画像生成ボタン | **ブロック** → モーダル表示 |
| 既存画像のダウンロード | **制限なし** |
| ギャラリー閲覧・いいね | **制限なし** |

---

## 6. DB 変更: plan カラム追加

### users テーブル

```sql
ALTER TABLE public.users
  ADD COLUMN plan TEXT NOT NULL DEFAULT 'free'
  CHECK (plan IN ('free', 'pro', 'business'));
```

- `free`: 無料プラン（デフォルト）
- `pro`: プロプラン（¥700/月）
- `business`: 将来の上位プラン用（予約）
- Stripe 連携前は Admin 画面から手動で切替
- Stripe 連携後は webhook で自動更新

---

## 7. 現行コードからの変更箇所

### DB

| ファイル | 変更内容 |
|---------|---------|
| `supabase/015_add_plan_column.sql` | `users` テーブルに `plan` カラム追加 |

### 制限ロジック

| ファイル | 現状 | 変更内容 |
|---------|------|---------|
| `api/account/usage/route.ts` | `imageLimitToday=3`, `sessionLimitMonth=3` | → `plan` カラム参照で月間画像制限を返却、セッション制限撤廃 |
| `api/generate-image/route.ts` | レート制限のみ | → 月間画像数チェックを追加（Free 10枚 / Pro 50枚超で 429） |
| `lib/types.ts` | `session_limit_this_month`, `image_generation_limit_today` | → `image_generation_limit_month` に変更 |
| `lib/rate-limiter.ts` | 分単位のレート制限 | → 変更なし（レート制限は維持） |

### UI — 上限通知 UX

| ファイル | 変更内容 |
|---------|---------|
| `components/PlanLimitModal.tsx` | セッション上限 → **画像枚数上限モーダル**に全面書き換え（成果サムネ + ポジティブ文面） |
| `components/chat/ChatInput.tsx` or 周辺 | **残数表示**を追加（「残り 7/10 枚」） |
| `hooks/useChatFlow.ts` or 周辺 | 残り3枚・1枚時の**トースト/バナー通知**ロジック |

### UI — プラン表示

| ファイル | 現状 | 変更内容 |
|---------|------|---------|
| `components/landing/PricingSection.tsx` | Free: 1:1のみ、3枚/日 | → 全機能開放、10枚/月 |
| `components/settings/PlanSection.tsx` | 「月3セッション」表示 | → 「月10枚」表示 + plan 名表示 |
| `components/settings/UsageSection.tsx` | セッション制限表示 | → 月間画像数バー表示 |
| `components/CommonFooter.tsx` | FAQ 「月3セッション、1日5枚」 | → 「月10枚」 |

### Admin

| ファイル | 変更内容 |
|---------|---------|
| `api/admin/revenue/route.ts` | セッション上限到達者 → 画像上限到達者に変更 |
| `app/admin/users/page.tsx` or `users/[id]` | ユーザーの plan 表示（将来: 手動切替 UI） |

### テスト

| ファイル | 変更内容 |
|---------|---------|
| `__tests__/api/account-usage.test.ts` | アサーション値を新制限に合わせる |

### ドキュメント

| ファイル | 変更内容 |
|---------|---------|
| `CLAUDE.md` | プラン制限テーブルを更新 |

---

## 8. 将来の拡張余地

| 施策 | タイミング | 概要 |
|------|----------|------|
| 枚数パック追加購入 | Pro 100人超 | ¥500/30枚パック（90日有効）で月額以外の収入源 |
| 上位プラン（Business） | Pro 200人超 | ¥1,980/月、200枚/月、チーム共有機能 |
| 年額プラン | フェーズ2以降 | ¥7,000/年（2ヶ月分お得）でチャーン低減 |
| Free 画像保存30日 | フェーズ1 | Storage コスト抑制 + Pro 動機（実装は Phase 1 で対応） |
| Stripe 決済連携 | フェーズ1 | Pro プランの課金実装（現在は UI のみ） |

---

## 9. 参考: 外注コストとの比較（訴求材料）

| 方法 | 1枚あたりコスト | 月10枚の場合 |
|------|---------------|-------------|
| デザイナー外注 | ¥3,000〜¥10,000 | ¥30,000〜¥100,000 |
| Canva Pro | ¥1,500/月（テンプレ利用） | ¥1,500 |
| **MenuCraft AI Pro** | **¥14/枚（¥700÷50枚）** | **¥700** |

→ Pro ¥700/月は圧倒的コスパ。LP の訴求ポイントとして活用可能。

---

## 10. 意思決定プロセス

### 検討の流れ

本ドキュメントは以下のプロセスを経て策定された。

#### Step 1: 課題の提起

PdO より「初期はフリーミアムで気軽に使ってもらいたいが、Free / Pro の機能分けをどうするか」が提起された。BtoC ではなく BtoB（飲食店オーナー向け）であることが重要な前提条件。

#### Step 2: 3案の比較検討

| 案 | 概要 | 評価 |
|---|------|------|
| **A. 現行ベース改善型** | 制限の種類を増やす（透かし、アスペクト比制限等） | 実装コスト高、初回体験を損なう |
| **B. シンプル使い切り型** | 機能制限なし、枚数のみで課金 | 体験最良、実装コスト最小 |
| **C. 従量課金ハイブリッド型** | 基本無料 + 枚数パック購入 | MRR 不安定、料金体系が複雑 |

→ **案B を採用**。理由: 「気軽に使ってもらう」に最も合致し、飲食店オーナーに説明しやすいシンプルさが BtoB に適している。

#### Step 3: 価格の決定

- 初期案: ¥980/月（Netflix 並の価格帯で BtoB 経費として妥当）
- **PdO 判断: ¥700/月を据え置き**。理由は「Netflix ぐらい高い」という消費者目線のハードルがあるため
- ¥700/月でもデザイナー外注（¥3,000〜¥10,000/枚）比で圧倒的に安い

#### Step 4: コスト分析と枚数設定

画像生成エンジン（Nano Banana Pro）のコスト構造を調査し、¥700/月で赤字にならない枚数を算出。

- 公式 API（¥20/枚）では Pro 35枚で赤字 → 公式 API 直接利用は不可
- Batch API（¥10/枚）で Pro 50枚/月なら ¥200 黒字 → 最低ライン
- Google Pro 契約（¥1/枚）に移行できれば大幅黒字

→ **Free 10枚/月、Pro 50枚/月** に決定。

#### Step 5: 上限通知 UX の議論

PdO より「画像生成時に課金を促されたらユーザーが萎えるのでは」という懸念が提起された。

**問題**: チャットで店舗情報を丁寧に入力 → 生成ボタン → 「上限です」は最悪の体験

**解決策**: 段階的通知で「驚かせない」設計
- 常時残数表示（ChatInput 付近）
- 残り3枚でトースト、残り1枚でバナー
- 上限到達モーダルは「使い切った」のポジティブフレーミング + 成果サムネイル表示

→ **PdO 承認済み**。

#### Step 6: DB 設計

- `users` テーブルに `plan` カラムを追加
- `'free' | 'pro' | 'business'` の3値（将来の拡張を考慮）
- Stripe 連携前は Admin から手動切替

### 決定事項サマリー

| 項目 | 決定 | 決定者 |
|------|------|--------|
| プラン方式 | 案B: 機能制限なし・枚数課金 | PdO |
| 価格 | ¥700/月（据え置き） | PdO |
| Free 枚数 | 10枚/月 | コスト分析に基づき合意 |
| Pro 枚数 | 50枚/月 | コスト分析に基づき合意 |
| セッション制限 | 撤廃 | 合意（コストゼロのため） |
| アスペクト比制限 | 撤廃（全種開放） | 合意（機能制限なし方針） |
| 画像保存 | Free 30日 / Pro 無期限 | 合意 |
| 上限通知 UX | 段階的通知 + ポジティブフレーミング | PdO 承認 |
| DB plan カラム | `'free' \| 'pro' \| 'business'` | PdO |
| 画像30日自動削除 | 将来対応（初回リリースでは未実装も可） | 未確定 |
| Stripe 決済連携 | 別途対応（本計画スコープ外） | 未着手 |

### 未決定事項

| 項目 | 状態 | 次のアクション |
|------|------|--------------|
| 画像30日自動削除の実装時期 | 未確定 | Phase 1 で実装するか、将来対応かを決定 |
| Stripe 決済連携の時期 | 未着手 | Pro 課金を実際に受け付ける前に必要 |
| Admin からの plan 手動切替 UI | 未実装 | Stripe 連携前の暫定運用として必要 |
